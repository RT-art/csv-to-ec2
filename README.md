# シンプルEC2自動作成システム

S3にアップロードされたCSVファイルに基づき、EC2インスタンスを自動で作成します。

## アーキテクチャ

![アーキテクチャ図](images/アーキテクチャ図.png)

## 特徴

- **設定不要**: `sam deploy`でデプロイすれば、必要なVPCやSubnetも自動で構築。Subnet IDなどを手動で設定する必要はありません。
- **簡単操作**: 作成したいEC2のAMI IDとインスタンスタイプをCSVに書いて、S3にアップロードするだけで自動でインスタンスが作成されます。`enable_ssm` 列を追加して `ON` を指定すると、SSMセッションマネージャーで接続可能なインスタンスを作成できます。

## 使い方

1.  **デプロイ**

    下記のコマンドでAWSリソースをデプロイします。
    コマンド実行後、Outputとして表示される `S3BucketName` の値を控えてください。

    ```bash
    sam build
    sam deploy --guided
    ```

2.  **CSVファイルのアップロード**

`sample.csv` を参考に、作成したいEC2の情報を記載したCSVファイルを用意します。（`ami_id`と`instance_type`の列は必須です。`enable_ssm` 列は任意で、SSM接続を有効にしたい場合に `ON` と記載します）
    用意したCSVファイルを、手順1で控えたS3バケットにアップロードします。

    ```bash
    # <S3BucketName> を実際の名前に置き換えてください
    aws s3 cp sample.csv s3://<S3BucketName>/
    ```

    アップロード後、自動でEC2インスタンスが作成されます。

3.  **クリーンアップ**

    作成したリソースをすべて削除するには、以下のコマンドを実行します。

    ```bash
    sam delete
